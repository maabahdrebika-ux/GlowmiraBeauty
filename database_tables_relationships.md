# شرح الجداول والعلاقات في قاعدة البيانات

## شرح ملفات الميقريشن

### 1. ملف `2025_02_20_175035_create_receipts_table.php`
- **الجدول**: `receipts` (الفواتير)
- **الحقول**:
  - `id`: معرف فريد للفاتورة
  - `receiptnumber`: رقم الفاتورة (يبدأ بـ "REC-" متبوعًا برقم متسلسل)
  - `total_price`: إجمالي سعر الفاتورة
  - `created_at`: تاريخ إنشاء الفاتورة
  - `users_id`: معرف المستخدم المرتبط بالفاتورة (علاقة مع جدول `users`)
  - `suppliers_id`: معرف المورد المرتبط بالفاتورة (علاقة مع جدول `suppliers`)

- **العلاقات**:
  - ينتمي إلى `User` (مستخدم) عبر `users_id`
  - ينتمي إلى `Supplier` (مورد) عبر `suppliers_id`

### 2. ملف `2025_02_20_175209_create_receiptitems_table.php`
- **الجدول**: `receiptitems` (عناصر الفاتورة)
- **الحقول**:
  - `id`: معرف فريد لعنصر الفاتورة
  - `price`: سعر العنصر
  - `quantty`: كمية العنصر
  - `expired_date`: تاريخ انتهاء الصلاحية (اختياري)
  - `created_at`: تاريخ إنشاء العنصر
  - `users_id`: معرف المستخدم المرتبط بالعنصر (علاقة مع جدول `users`)
  - `receipts_id`: معرف الفاتورة المرتبط بالعنصر (علاقة مع جدول `receipts`)
  - `coolors_id`: معرف اللون المرتبط بالعنصر (علاقة مع جدول `coolors`)
  - `sizes_id`: معرف الحجم المرتبط بالعنصر (علاقة مع جدول `sizes`)
  - `products_id`: معرف المنتج المرتبط بالعنصر (علاقة مع جدول `products`)

- **العلاقات**:
  - ينتمي إلى `User` (مستخدم) عبر `users_id`
  - ينتمي إلى `Receipt` (فاتورة) عبر `receipts_id`
  - ينتمي إلى `Coolor` (لون) عبر `coolors_id`
  - ينتمي إلى `Size` (حجم) عبر `sizes_id`
  - ينتمي إلى `Product` (منتج) عبر `products_id`

### 3. ملف `2011_05_09_083346_create_addresses_table.php`
- **الجدول**: `addresses` (العناوين)
- **الحقول**:
  - `id`: معرف فريد للعنوان
  - `name`: اسم العنوان باللغة العربية
  - `nameen`: اسم العنوان باللغة الإنجليزية
  - `created_at`: تاريخ إنشاء العنوان

- **العلاقات**:
  - يحتوي على العديد من `User` (مستخدمين) عبر `address_id`

### 4. ملف `2025_11_16_105056_create_blogs_table.php`
- **الجدول**: `blogs` (المدونات)
- **الحقول**:
  - `id`: معرف فريد للمدونة
  - `title_ar`: عنوان المدونة باللغة العربية
  - `title_en`: عنوان المدونة باللغة الإنجليزية
  - `description_ar`: وصف المدونة باللغة العربية
  - `description_en`: وصف المدونة باللغة الإنجليزية
  - `image`: صورة المدونة (اختيارية)
  - `active`: حالة المدونة (افتراضيًا نشط)
  - `created_at`: تاريخ إنشاء المدونة
  - `updated_at`: تاريخ آخر تحديث للمدونة (اختياري)

### 5. ملف `2014_10_12_000000_create_users_table.php`
- **الجدول**: `users` (المستخدمين)
- **الحقول**:
  - `id`: معرف فريد للمستخدم
  - `first_name`: الاسم الأول
  - `last_name`: الاسم الأخير
  - `username`: اسم المستخدم (فريد)
  - `email`: البريد الإلكتروني (فريد)
  - `phonenumber`: رقم الهاتف (اختياري)
  - `email_verified_at`: تاريخ التحقق من البريد الإلكتروني (اختياري)
  - `password`: كلمة المرور
  - `active`: حالة المستخدم (افتراضيًا نشط)
  - `created_at`: تاريخ إنشاء المستخدم
  - `address_id`: معرف العنوان المرتبط بالمستخدم (علاقة مع جدول `addresses`)

- **العلاقات**:
  - ينتمي إلى `Address` (عنوان) عبر `address_id`

### 6. ملف `2022_10_01_192626_create_suppliers_table.php`
- **الجدول**: `suppliers` (الموردين)
- **الحقول**:
  - `id`: معرف فريد للمورد
  - `name`: اسم المورد
  - `phone`: رقم الهاتف (اختياري)
  - `email`: البريد الإلكتروني (اختياري)
  - `address`: عنوان المورد (اختياري)
  - `notes`: ملاحظات حول المورد (اختيارية)
  - `created_at`: تاريخ إنشاء المورد
  - `updated_at`: تاريخ آخر تحديث للمورد (اختياري)

- **العلاقات**:
  - يحتوي على العديد من `Receipt` (فواتير) عبر `suppliers_id`

### 7. ملف `2025_02_20_070941_create_grades_table.php`
- **الجدول**: `coolors` (الألوان)
- **الحقول**:
  - `id`: معرف فريد للون
  - `name`: اسم اللون باللغة العربية (اختياري)
  - `namee`: اسم اللون باللغة الإنجليزية (اختياري)
  - `products_id`: معرف المنتج المرتبط بالون (علاقة مع جدول `products`)

- **العلاقات**:
  - ينتمي إلى `Product` (منتج) عبر `products_id`

### 8. ملف `2024_11_29_201704_create_products_table.php`
- **الجدول**: `products` (المنتجات)
- **الحقول**:
  - `id`: معرف فريد للمنتج
  - `name`: اسم المنتج باللغة العربية
  - `namee`: اسم المنتج باللغة الإنجليزية
  - `material`: المادة المصنوعة منها (اختيارية)
  - `brandname_ar`: اسم العلامة التجارية باللغة العربية (اختياري)
  - `brandname_en`: اسم العلامة التجارية باللغة الإنجليزية (اختياري)
  - `country_of_origin_ar`: بلد المنشأ باللغة العربية (اختياري)
  - `country_of_origin_en`: بلد المنشأ باللغة الإنجليزية (اختياري)
  - `description_ar`: وصف المنتج باللغة العربية (اختياري)
  - `description_en`: وصف المنتج باللغة الإنجليزية (اختياري)
  - `barcode`: الباركود الخاص بالمنتج (فريد، اختياري)
  - `price`: سعر المنتج
  - `categories_id`: معرف الفئة المرتبط بالمنتج (علاقة مع جدول `categories`)
  - `image`: صورة المنتج (اختيارية)
  - `notes`: ملاحظات حول المنتج (اختيارية)
  - `is_available`: حالة توافر المنتج (افتراضيًا متوفر)
  - `created_at`: تاريخ إنشاء المنتج

- **العلاقات**:
  - ينتمي إلى `Category` (فئة) عبر `categories_id`
  - يحتوي على العديد من `Coolor` (ألوان) عبر `products_id`
  - يحتوي على العديد من `Size` (أحجام) عبر `products_id`
  - يحتوي على العديد من `Receiptitem` (عناصر الفاتورة) عبر `products_id`

### 9. ملف `2025_02_20_070848_create_sizes_table.php`
- **الجدول**: `sizes` (الأحجام)
- **الحقول**:
  - `id`: معرف فريد للحجم
  - `name`: اسم الحجم
  - `products_id`: معرف المنتج المرتبط بالحجم (علاقة مع جدول `products`)

- **العلاقات**:
  - ينتمي إلى `Product` (منتج) عبر `products_id`

### 10. ملف `2024_11_29_194046_create_categories_table.php`
- **الجدول**: `categories` (الفئات)
- **الحقول**:
  - `id`: معرف فريد للفئة
  - `name`: اسم الفئة باللغة العربية
  - `englishname`: اسم الفئة باللغة الإنجليزية
  - `active`: حالة الفئة (افتراضيًا نشط)
  - `created_at`: تاريخ إنشاء الفئة

- **العلاقات**:
  - يحتوي على العديد من `Product` (منتجات) عبر `categories_id`

## العلاقات بين الجداول

1. **علاقة `receipts` مع `users`**:
   - كل فاتورة تنتمي إلى مستخدم واحد عبر `users_id`.
   - عند حذف المستخدم، يتم حذف جميع الفواتير المرتبطة به تلقائيًا (`onDelete('cascade')`).

2. **علاقة `receipts` مع `suppliers`**:
   - كل فاتورة تنتمي إلى مورد واحد عبر `suppliers_id`.
   - عند حذف المورد، يتم حذف جميع الفواتير المرتبطة به تلقائيًا (`onDelete('cascade')`).

3. **علاقة `receiptitems` مع `receipts`**:
   - كل عنصر فاتورة ينتمي إلى فاتورة واحدة عبر `receipts_id`.
   - عند حذف الفاتورة، يتم حذف جميع العناصر المرتبطة بها تلقائيًا (`onDelete('cascade')`).

4. **علاقة `receiptitems` مع `users`**:
   - كل عنصر فاتورة ينتمي إلى مستخدم واحد عبر `users_id`.
   - عند حذف المستخدم، يتم حذف جميع العناصر المرتبطة به تلقائيًا (`onDelete('cascade')`).

5. **علاقة `receiptitems` مع `coolors`**:
   - كل عنصر فاتورة ينتمي إلى لون واحد عبر `coolors_id`.
   - عند حذف اللون، يتم حذف جميع العناصر المرتبطة به تلقائيًا (`onDelete('cascade')`).

6. **علاقة `receiptitems` مع `sizes`**:
   - كل عنصر فاتورة ينتمي إلى حجم واحد عبر `sizes_id`.
   - عند حذف الحجم، يتم حذف جميع العناصر المرتبطة به تلقائيًا (`onDelete('cascade')`).

7. **علاقة `receiptitems` مع `products`**:
   - كل عنصر فاتورة ينتمي إلى منتج واحد عبر `products_id`.
   - عند حذف المنتج، يتم حذف جميع العناصر المرتبطة به تلقائيًا (`onDelete('cascade')`).

8. **علاقة `addresses` مع `users`**:
   - كل عنوان يحتوي على العديد من المستخدمين عبر `address_id`.
   - عند حذف العنوان، يتم حذف جميع المستخدمين المرتبطين به تلقائيًا (`onDelete('cascade')`).

9. **علاقة `users` مع `addresses`**:
   - كل مستخدم ينتمي إلى عنوان واحد عبر `address_id`.
   - عند حذف العنوان، يتم حذف جميع المستخدمين المرتبطين به تلقائيًا (`onDelete('cascade')`).

10. **علاقة `suppliers` مع `receipts`**:
    - كل مورد يحتوي على العديد من الفواتير عبر `suppliers_id`.
    - عند حذف المورد، يتم حذف جميع الفواتير المرتبطة به تلقائيًا (`onDelete('cascade')`).

11. **علاقة `coolors` مع `products`**:
    - كل لون ينتمي إلى منتج واحد عبر `products_id`.
    - عند حذف المنتج، يتم حذف جميع الألوان المرتبطة به تلقائيًا (`onDelete('cascade')`).

12. **علاقة `sizes` مع `products`**:
    - كل حجم ينتمي إلى منتج واحد عبر `products_id`.
    - عند حذف المنتج، يتم حذف جميع الأحجام المرتبطة به تلقائيًا (`onDelete('cascade')`).

13. **علاقة `products` مع `categories`**:
    - كل منتج ينتمي إلى فئة واحدة عبر `categories_id`.
    - عند حذف الفئة، يتم حذف جميع المنتجات المرتبطة بها تلقائيًا (`onDelete('cascade')`).

14. **علاقة `categories` مع `products`**:
    - كل فئة تحتوي على العديد من المنتجات عبر `categories_id`.
    - عند حذف الفئة، يتم حذف جميع المنتجات المرتبطة بها تلقائيًا (`onDelete('cascade')`).

## ملخص
- جدول `receipts` يمثل الفواتير ويحتوي على معلومات عامة عن الفاتورة مثل الرقم الإجمالي والسعر.
- جدول `receiptitems` يمثل العناصر التفصيلية للفاتورة ويحتوي على معلومات عن كل عنصر مثل السعر والكمية والتاريخ.
- جدول `addresses` يمثل العناوين ويحتوي على معلومات عن العناوين باللغة العربية والإنجليزية.
- جدول `blogs` يمثل المدونات ويحتوي على معلومات عن المدونات باللغة العربية والإنجليزية.
- جدول `users` يمثل المستخدمين ويحتوي على معلومات عن المستخدمين مثل الاسم والبريد الإلكتروني ورقم الهاتف.
- جدول `suppliers` يمثل الموردين ويحتوي على معلومات عن الموردين مثل الاسم والبريد الإلكتروني والعنوان.
- جدول `coolors` يمثل الألوان ويحتوي على معلومات عن الألوان باللغة العربية والإنجليزية.
- جدول `sizes` يمثل الأحجام ويحتوي على معلومات عن الأحجام.
- جدول `products` يمثل المنتجات ويحتوي على معلومات عن المنتجات باللغة العربية والإنجليزية.
- جدول `categories` يمثل الفئات ويحتوي على معلومات عن الفئات باللغة العربية والإنجليزية.

العلاقات بين الجداول تمكّن من تنظيم البيانات بشكل فعال، حيث يمكن الوصول إلى البيانات المرتبطة بسهولة من خلال العلاقات المحددة.